# Git Commit è¦ç¯„èˆ‡ Changelog ä½¿ç”¨èªªæ˜

æœ¬å°ˆæ¡ˆä½¿ç”¨ **Conventional Commits** è¦ç¯„ä¾†ç®¡ç† Git commit è¨Šæ¯ï¼Œä¸¦è‡ªå‹•ç”Ÿæˆ CHANGELOGã€‚

## ğŸ“‹ ç›®éŒ„

- [Commit è¨Šæ¯æ ¼å¼](#commit-è¨Šæ¯æ ¼å¼)
- [Commit é¡å‹èªªæ˜](#commit-é¡å‹èªªæ˜)
- [ç¯„ä¾‹](#ç¯„ä¾‹)
- [å¦‚ä½•ç”Ÿæˆ CHANGELOG](#å¦‚ä½•ç”Ÿæˆ-changelog)
- [ç‰ˆæœ¬ç™¼å¸ƒæµç¨‹](#ç‰ˆæœ¬ç™¼å¸ƒæµç¨‹)

---

## Commit è¨Šæ¯æ ¼å¼

æ¯å€‹ commit è¨Šæ¯éƒ½æ‡‰è©²éµå¾ªä»¥ä¸‹æ ¼å¼ï¼š

```
<type>(<scope>): <subject>

<body>

<footer>
```

### å¿…å¡«éƒ¨åˆ†

- **type**: commit çš„é¡å‹ï¼ˆå¿…å¡«ï¼‰
- **subject**: ç°¡çŸ­æè¿°ï¼ˆå¿…å¡«ï¼Œä¸è¶…é 100 å­—å…ƒï¼‰

### å¯é¸éƒ¨åˆ†

- **scope**: å½±éŸ¿ç¯„åœï¼ˆå¯é¸ï¼‰
- **body**: è©³ç´°æè¿°ï¼ˆå¯é¸ï¼‰
- **footer**: å‚™è¨»ï¼Œé€šå¸¸ç”¨æ–¼é—œé–‰ issueï¼ˆå¯é¸ï¼‰

---

## Commit é¡å‹èªªæ˜

| é¡å‹ | èªªæ˜ | æ˜¯å¦å‡ºç¾åœ¨ CHANGELOG |
|------|------|---------------------|
| `feat` | æ–°å¢åŠŸèƒ½ | âœ… |
| `fix` | ä¿®å¾© bug | âœ… |
| `docs` | æ–‡æª”æ›´æ–° | âŒ |
| `style` | ä»£ç¢¼æ ¼å¼èª¿æ•´ï¼ˆä¸å½±éŸ¿åŠŸèƒ½ï¼‰ | âŒ |
| `refactor` | ä»£ç¢¼é‡æ§‹ï¼ˆä¸æ˜¯æ–°åŠŸèƒ½ä¹Ÿä¸æ˜¯ä¿® bugï¼‰ | âŒ |
| `perf` | æ€§èƒ½å„ªåŒ– | âœ… |
| `test` | æ¸¬è©¦ç›¸é—œ | âŒ |
| `chore` | å…¶ä»–é›œé …ï¼ˆæ§‹å»ºå·¥å…·ã€ä¾è³´æ›´æ–°ç­‰ï¼‰ | âŒ |
| `build` | æ§‹å»ºç³»çµ±æˆ–å¤–éƒ¨ä¾è³´çš„è®Šæ›´ | âŒ |
| `ci` | CI é…ç½®æ–‡ä»¶å’Œè…³æœ¬çš„è®Šå‹• | âŒ |
| `revert` | å›é€€ä¹‹å‰çš„ commit | âœ… |

---

## ç¯„ä¾‹

### 1. ç°¡å–®çš„åŠŸèƒ½æ–°å¢

```bash
git commit -m "feat: æ–°å¢ç”¨æˆ¶ç™»å…¥åŠŸèƒ½"
```

### 2. å¸¶ scope çš„ bug ä¿®å¾©

```bash
git commit -m "fix(auth): ä¿®å¾©ç™»å…¥é©—è­‰å¤±æ•—çš„å•é¡Œ"
```

### 3. å®Œæ•´æ ¼å¼çš„ commit

```bash
git commit -m "feat(user): æ–°å¢ç”¨æˆ¶è³‡æ–™ç·¨è¼¯åŠŸèƒ½

- æ–°å¢ç”¨æˆ¶è³‡æ–™è¡¨å–®
- å¯¦ç¾è³‡æ–™é©—è­‰é‚è¼¯
- æ–°å¢é ­åƒä¸Šå‚³åŠŸèƒ½

Closes #123"
```

### 4. é‡å¤§è®Šæ›´ï¼ˆBreaking Changeï¼‰

```bash
git commit -m "feat(api): é‡æ–°è¨­è¨ˆ API ä»‹é¢

BREAKING CHANGE: API ç«¯é»å¾ /api/v1 è®Šæ›´ç‚º /api/v2"
```

### 5. å…¶ä»–å¸¸è¦‹ç¯„ä¾‹

```bash
# æ–‡æª”æ›´æ–°
git commit -m "docs: æ›´æ–° README å®‰è£èªªæ˜"

# ä»£ç¢¼é‡æ§‹
git commit -m "refactor(components): é‡æ§‹æŒ‰éˆ•çµ„ä»¶çµæ§‹"

# æ€§èƒ½å„ªåŒ–
git commit -m "perf: å„ªåŒ–åˆ—è¡¨æ¸²æŸ“æ€§èƒ½"

# æ¸¬è©¦
git commit -m "test: æ–°å¢ç™»å…¥åŠŸèƒ½å–®å…ƒæ¸¬è©¦"

# æ§‹å»ºç›¸é—œ
git commit -m "chore: æ›´æ–°ä¾è³´å¥—ä»¶ç‰ˆæœ¬"
```

---

## å¦‚ä½•ç”Ÿæˆ CHANGELOG

æœ¬å°ˆæ¡ˆå·²é…ç½®å¥½è‡ªå‹•ç”Ÿæˆ CHANGELOG çš„åŠŸèƒ½ã€‚

### æ–¹æ³•ä¸€ï¼šç”Ÿæˆæœ€æ–°ç‰ˆæœ¬çš„è®Šæ›´è¨˜éŒ„

ç•¶ä½ æº–å‚™ç™¼å¸ƒæ–°ç‰ˆæœ¬æ™‚ï¼ŒåŸ·è¡Œï¼š

```bash
pnpm run changelog
```

é€™æœƒæ ¹æ“šä¸Šæ¬¡ç‰ˆæœ¬ä»¥ä¾†çš„æ‰€æœ‰ commits ç”Ÿæˆè®Šæ›´è¨˜éŒ„ï¼Œä¸¦è¿½åŠ åˆ° `CHANGELOG.md` æ–‡ä»¶ä¸­ã€‚

### æ–¹æ³•äºŒï¼šé‡æ–°ç”Ÿæˆå®Œæ•´çš„ CHANGELOG

å¦‚æœä½ æƒ³æ ¹æ“šæ•´å€‹ Git æ­·å²é‡æ–°ç”Ÿæˆå®Œæ•´çš„ CHANGELOGï¼š

```bash
pnpm run changelog:all
```

**æ³¨æ„**ï¼šé€™æœƒè¦†è“‹ç¾æœ‰çš„ `CHANGELOG.md` æ–‡ä»¶ã€‚

---

## ç‰ˆæœ¬ç™¼å¸ƒæµç¨‹

å»ºè­°çš„ç‰ˆæœ¬ç™¼å¸ƒæµç¨‹ï¼š

### 1. ç¢ºä¿æ‰€æœ‰è®Šæ›´éƒ½å·²æäº¤

```bash
git status
```

### 2. æ›´æ–°ç‰ˆæœ¬è™Ÿ

æ‰‹å‹•ç·¨è¼¯ `package.json` ä¸­çš„ `version` æ¬„ä½ï¼Œæˆ–ä½¿ç”¨ npm versionï¼š

```bash
# æ›´æ–°è£œä¸ç‰ˆæœ¬ (0.0.x)
npm version patch

# æ›´æ–°æ¬¡ç‰ˆæœ¬ (0.x.0)
npm version minor

# æ›´æ–°ä¸»ç‰ˆæœ¬ (x.0.0)
npm version major
```

npm version æœƒè‡ªå‹•ï¼š
- æ›´æ–° package.json ä¸­çš„ç‰ˆæœ¬è™Ÿ
- ç”Ÿæˆ CHANGELOG
- å‰µå»ºä¸€å€‹ commit
- å‰µå»ºä¸€å€‹ git tag

### 3. æ‰‹å‹•ç”Ÿæˆ CHANGELOGï¼ˆå¦‚æœæ²’æœ‰ä½¿ç”¨ npm versionï¼‰

```bash
pnpm run changelog
git add CHANGELOG.md
git commit -m "chore: æ›´æ–° CHANGELOG"
```

### 4. å‰µå»ºç‰ˆæœ¬æ¨™ç±¤

```bash
git tag -a v1.0.0 -m "Release version 1.0.0"
```

### 5. æ¨é€åˆ°é ç«¯

```bash
git push origin main --tags
```

---

## ğŸ“Œ æ³¨æ„äº‹é …

1. **Commit è¨Šæ¯æœƒè¢«è‡ªå‹•æª¢æŸ¥**ï¼šç•¶ä½ åŸ·è¡Œ `git commit` æ™‚ï¼Œhusky æœƒè‡ªå‹•é‹è¡Œ commitlint æª¢æŸ¥ä½ çš„ commit è¨Šæ¯æ ¼å¼ã€‚å¦‚æœæ ¼å¼ä¸æ­£ç¢ºï¼Œcommit æœƒè¢«æ‹’çµ•ã€‚

2. **åªæœ‰ç‰¹å®šé¡å‹æœƒå‡ºç¾åœ¨ CHANGELOG**ï¼šåªæœ‰ `feat`ã€`fix`ã€`perf`ã€`revert` é€™äº›é¡å‹çš„ commits æœƒå‡ºç¾åœ¨ç”Ÿæˆçš„ CHANGELOG ä¸­ã€‚

3. **ä½¿ç”¨ä¸­æ–‡æè¿°æ²’å•é¡Œ**ï¼šé›–ç„¶é¡å‹å¿…é ˆä½¿ç”¨è‹±æ–‡ï¼Œä½† subject å’Œ body å¯ä»¥ä½¿ç”¨ä¸­æ–‡ã€‚

4. **Breaking Changes**ï¼šå¦‚æœä½ çš„è®Šæ›´æœƒç ´å£å‘å¾Œå…¼å®¹æ€§ï¼Œå‹™å¿…åœ¨ commit è¨Šæ¯ä¸­åŠ ä¸Š `BREAKING CHANGE:`ï¼Œé€™æœƒåœ¨ CHANGELOG ä¸­ç‰¹åˆ¥æ¨™è¨»ã€‚

---

## ğŸ”§ ç›¸é—œé…ç½®æ–‡ä»¶

- **commitlint.config.ts**: Commit è¨Šæ¯æª¢æŸ¥è¦å‰‡
- **.husky/commit-msg**: Git hookï¼Œåœ¨ commit æ™‚è‡ªå‹•æª¢æŸ¥è¨Šæ¯æ ¼å¼
- **package.json**: åŒ…å« changelog ç”Ÿæˆçš„ scripts

---

## ğŸ“š åƒè€ƒè³‡æ–™

- [Conventional Commits è¦ç¯„](https://www.conventionalcommits.org/)
- [Angular Commit Message Guidelines](https://github.com/angular/angular/blob/main/CONTRIBUTING.md#commit)
- [Semantic Versioning](https://semver.org/)

---

å¦‚æœ‰ä»»ä½•å•é¡Œï¼Œè«‹æŸ¥é–±ä¸Šè¿°æ–‡æª”æˆ–è¯ç¹«å°ˆæ¡ˆç¶­è­·è€…ã€‚

